<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>ITCU â€” 3840x2160 Single File</title>

<!-- Leaflet CSS (kept as in original) -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>

<style>
  /* Page-level: allow scrolling when device smaller than 3840x2160 */
  html,body{
    height:100%;
    margin:0;
    background:#000;
    overflow:auto; /* A1: visible scrollbars */
  }

  /* Fixed UHD canvas wrapper */
  .uhd-wrapper{
    width:3840px;
    height:2160px;
    margin:0 auto;
    position:relative;
    overflow:visible;
    background:#08121a;
  }

  /* Sections (Landing, Map, Game) full-size inside wrapper */
  .section {
    position:absolute;
    left:0; top:0;
    width:3840px;
    height:2160px;
    transition: opacity 0.45s ease-in-out, visibility 0.45s;
    opacity:0;
    visibility:hidden;
    pointer-events:none;
  }
  .section.active {
    opacity:1;
    visibility:visible;
    pointer-events:auto;
  }

  /* Landing page styling */
  #landing{
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
    background:#013a63;
  }
  #landing img{
    width:3200px; /* large due to UHD */
    max-width:90%;
    height:auto;
    cursor:pointer;
    border-radius:12px;
    transition: transform .25s ease;
  }
  #landing img:hover{ transform:scale(1.02); }
  #landing p{ color:#fff; font-size:48px; margin-top:18px; text-align:center; }

  /* Map section styling */
  #map-section { background:#c8e6f5; }
  #map { width:3840px; height:2160px; }

  /* Ready to Play button on map (large for UHD) */
  .play-btn{
    position:absolute;
    right:60px;
    top:60px;
    z-index:1200;
    background:#007bff;
    color:#fff;
    border:none;
    padding:18px 24px;
    font-size:28px;
    border-radius:8px;
    cursor:pointer;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
  }
  .play-btn:active{ transform:translateY(2px); }

  /* Game section */
  #game {
    display:flex;
    align-items:center;
    justify-content:center;
    background:#f0f4f8;
  }
  .game-container{
    width:1100px;
    max-width:90%;
    background:#fff;
    padding:36px;
    border-radius:14px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
    text-align:center;
  }
  .game-container h1{ font-size:44px; margin:0 0 12px; }
  .option{
    display:block;
    width:100%;
    text-align:left;
    background:#e0e7ff;
    border:none;
    padding:14px 16px;
    margin:10px 0;
    font-size:22px;
    border-radius:10px;
    cursor:pointer;
  }
  .back-button{
    margin-top:20px;
    background:#4f46e5;
    color:#fff;
    border:none;
    padding:12px 18px;
    font-size:20px;
    border-radius:10px;
    cursor:pointer;
  }

  /* Popup/table styling (Leaflet popup will inherit) but ensure readable in 4K */
  .popup-content table{ width:100%; border-collapse:collapse; font-size:22px; }
  .popup-content th, .popup-content td{ border:1px solid #ddd; padding:10px; text-align:left; }
  .popup-content th{ background:#f4f4f4; font-weight:700; }

  /* Make sure map tiles & controls are on top */
  .leaflet-container { z-index: 1; }

  /* Responsive note: wrapper is fixed 3840x2160; page will show scrollbars on smaller screens */
</style>
</head>
<body>

<div class="uhd-wrapper">

  <!-- LANDING -->
  <div id="landing" class="section active" aria-label="landing">
    <div style="text-align:center;">
      <!-- Local image: landingopage.png must be placed next to this HTML -->
      <img src="landingopage.png" alt="Landing" onclick="showSection('map-section')">
      <p>Click the image to enter</p>
    </div>
  </div>

  <!-- MAP -->
  <div id="map-section" class="section" aria-label="map">
    <div id="map"></div>
    <button class="play-btn" onclick="showSection('game')">Ready to Play</button>
  </div>

  <!-- GAME -->
  <div id="game" class="section" aria-label="game">
    <div class="game-container">
      <h1 id="question-text">Loading...</h1>
      <div id="options"></div>
      <div id="result" style="font-weight:700; font-size:28px; margin-top:18px;"></div>
      <button class="back-button" onclick="showSection('map-section')">Back to Interactive Map</button>
    </div>
  </div>

</div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

<script>
/* Section switching with smooth fade */
function showSection(id){
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  const el = document.getElementById(id);
  if(!el) return;
  el.classList.add('active');

  // If map section shown, trigger map invalidate/resize
  if(id === 'map-section' && window._itcu_map_ready){
    setTimeout(()=> {
      try { _itcu_map.invalidateSize(); } catch(e) {}
    }, 300);
  }
}

/* ---------- MAP: Leaflet init (kept similar to your original) ---------- */
const _itcu_map = L.map('map', {
  worldCopyJump: false,
  noWrap: true,
  minZoom: 2,
  maxZoom: 6,
  zoomSnap: 0.25,
  zoomDelta: 0.5
}).setView([20,0], 3);

// English-only tiles
L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
  maxZoom:6, minZoom:2, noWrap:true, attribution:'&copy; OpenStreetMap contributors, &copy; CartoDB'
}).addTo(_itcu_map);

L.tileLayer('https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png', {
  maxZoom:6, minZoom:2, noWrap:true, attribution:'&copy; OpenStreetMap contributors, &copy; CartoDB'
}).addTo(_itcu_map);

window._itcu_map = _itcu_map; // expose for later

const allowedCountries = [
  'Italy','United Kingdom','Australia','Japan','United States of America','Canada',
  'Cambodia','Laos','Myanmar','France','Taiwan','South Korea','Philippines','India','China','East Asia'
];

const shortInfo = {
  'Philippines': {capital: 'Manila', detail: '', note: [['Region','Southeast Asia','English','Currency','Peso (PHP)']]},
  'United States of America': {capital: 'Washington, D.C.', detail: 'The partnership with the USA is on agriculture. We are sending PhD scholars at Texas Tech University taking up Plant and Soil Science', note: [['3','On-going','PHD']]},
  'Japan': {capital: 'Tokyo', detail: 'The top partnership with Japan is on agriculture and health. We are sending PhD scholars at Nagoya and Osaka University. We also have joint researches on agriculture, health, engineering, and nuclear.',note: [['9','On-going','PHD']]},
  'France': {capital: 'Paris', detail: 'The partnership with France is on health, engineering, environment, agriculture, and economy. We are sending PhD scholars at Texas Tech University taking up Plant and Soil Science',note: [['97','On-going','MS'],['19','On-going','PHD']]},
  'India': {capital: 'New Delhi', detail: 'The partnership with India is on AI, engineering, and health. We have joint researches on those areas and continues to advance other priorities',note: [['Artificial Intelligence','1'],['Enginnering','1'],['Health','1']]},
  'Australia': {capital: 'Canberra', detail: 'The top partnership with Australia is on STEM education, IT, and agriculture. We are sending MS and PhD scholars at various universities, e.g. James Cook University, Griffith University, and Queensland University of Technology. We also note that DOST-PCAARRD and  Australian Centre for International Agricultural Research have been partners for almost 5 decades advancing agricultural research in the PH.',note: [['17','Graduated','MS'],['11','On-going','MS'],['28','On-going','PHD']]},
  'United Kingdom': {capital: 'London', detail: 'The top partnership with UK is on health, environment, and agriculture. We are sending PhD scholars at various universities, e.g. Universities of Cambridge, Edinburgh, Glasgow, Sterling, etc. We also had joint researches on health and environment. ',note: [['10','Graduated','PHD'],['5','On-going','PHD']]},
  'Italy': {capital: 'Rome', detail: 'The partnership with Italy is on health. We are sending PhD scholars at University of Trieste taking up Molecular Biomedicine', note: [['2','Graduated','PHD'],['6','On-going','PHD']]},
  'Canada': {capital: 'Ottawa', detail: 'The partnership with Canada is on agriculture, health, engineering, and environment. We are sending PhD and MS scholars at University of Alberta. Soon scholars will also be attending at University of Saskatchewan and Dalhousie University.',note: [['1','Graduated','MS'],['6','On-going','MS'],['9','On-going','PHD']]},
  'China': {capital: 'Beijing', detail: 'The partnership with China is on energy, agriculture, and health. We have joint researches on those areas and continues to advance other priorities.',note: [['Agriculture','1'],['Enegry','1'],['Health','1']]},
  'South Korea': {capital: 'Seoul', detail: 'The top partnership with South Korea is on agriculture, climate and weather, energy, and health. We have joint researches on those areas and continues to advance other priorities.',note: [['Agriculture','1'],['Climate and Weather','1'],['Energy','1'],['Health','1']]},
  'Taiwan': {capital: 'Taipei', detail: 'The top partnership with Taiwan is on geological, environment, climate and weather, and health. We have numerous joint researches and sandwich scholarship programs with Taiwan. ',note: [['4','Finished','BS/MS'],['81','Finished','MS'],['20','Finished','PHD']]},
  'Cambodia': {capital: 'Phnom Penh', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['12','On-going','MS']]},
  'Laos': {capital: 'Vientiane', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['3','On-going','PHD'],['3','On-going','PHD']]},
  'Myanmar': {capital: 'Naypyidaw', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['15','On-going','PHD'],['17','On-going','PHD']]}
};

let globalView = _itcu_map.getCenter();
let globalZoom = _itcu_map.getZoom();

fetch('https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json')
  .then(res => res.json())
  .then(data => {
    L.geoJSON(data, {
      style: feature => {
        return allowedCountries.includes(feature.properties.name)
          ? {color: '#007BFF', weight: 1.5, fillOpacity: 0.4}
          : {color: '#ccc', weight: 0.5, fillOpacity: 0.05};
      },
      onEachFeature: (feature, layer) => {
        if (allowedCountries.includes(feature.properties.name)) {
          layer.on({
            mouseover: e => e.target.setStyle({color: '#FF6600', weight: 2}),
            mouseout: e => e.target.setStyle({color: '#007BFF', weight: 1.5}),
            click: e => {
              _itcu_map.flyToBounds(layer.getBounds(), {padding: [60, 60], duration: 1.2});
              showPopup(feature, e.latlng);
            }
          });
        }
      }
    }).addTo(_itcu_map);
  }).catch(err=>{
    console.warn('GeoJSON load failed:', err);
    alert('Could not load world GeoJSON from remote. Check network or embed GeoJSON.');
  });

function showPopup(feature, latlng) {
  const name = feature.properties.name || 'Unknown';
  const info = shortInfo[name];

  let popupHTML = `<div class='popup-content'><h3>${name}</h3>`;

  if (info) {
    popupHTML += `<b>Capital:</b> ${info.capital}<br><b>Detail/s :</b> ${info.detail}`;
    popupHTML += `<table><tr><th>No. of Student/s</th><th>Status</th><th>Level</th></tr>`;
    info.note.forEach((row) => {
      const a = row[0]||'';
      const b = row[1]||'';
      const c = row[2]||'';
      popupHTML += `<tr><td>${a}</td><td>${b}</td><td>${c}</td></tr>`;
    });
    popupHTML += `</table>`;
  } else {
    popupHTML += `No data available. <a href='https://en.wikipedia.org/wiki/${encodeURIComponent(name)}' target='_blank'>Learn more</a>`;
  }

  popupHTML += `</div>`;

  const popup = L.popup({maxWidth: 480, closeButton: true})
    .setLatLng(latlng)
    .setContent(popupHTML)
    .openOn(_itcu_map);

  _itcu_map.once('popupclose', () => {
    _itcu_map.flyTo(globalView, globalZoom, {duration: 1.2});
  });
}

/* ---------- GAME (unchanged content as requested) ---------- */
const questions = [
  { question: "What is the acronym of DOST?", options: ["Department of Science Technology", "Department of Sleep Tale", "Department of Science and Technology", "Department of Siksik and Tavern"], correct: 2 },
  { question: "Which country does DOST collaborate with?", options: ["Haiti", "Egypt", "North Korea", "France"], correct: 3 },
  { question: "Which bilateral partner does Sandwich Scholarship Program?", options: ["Canada", "Taiwan", "India", "China"], correct: 1 },
  { question: "Which area of study does South Korea priorities?", options: ["Health", "Engineering", "Information Technology (IT)", "Nuclear"], correct: 0 },
  { question: "Which one is a country?", options: ["Tree", "River", "Italy", "Mountain"], correct: 2 },
  { question: "who is the Secretary of DOST?", options: ["Sec. Renato U. Solidum, Jr.", "Sec. Arthur T. Gumabao", "Sec. Leah J. Buendia", "Sec. Renato U. Solidum, Sr."], correct: 0 },
  { question: "What countries composes ASEAN CLM?", options: ["Cambodia-Lao PDR-Myanmar", "Canada-Laoag-Manila", "China-Lithuania-Malaysia", "Cambodia-Libia-Mexico"], correct: 0 },
  { question: "Which country has still monarchy?", options: ["Philippines", "Japan", "Singapore", "USA"], correct: 0 },
  { question: "NSTW 2025 is being held at?", options: ["Iloilo City", "Cagayan de Oro", "Manila", "Laoag City"], correct: 3 },
  { question: "What is the acronym of ITCU?", options: ["International Technology Commerce Unit", "International Technical Cooperation Division", "International Cooperation Unit", "International Technology Cooperation Unit"], correct: 4 },
];

let selectedQuestions = [];
let current = 0;
let score = 0;

function getRandomQuestions() {
  let shuffled = [...questions].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, 2);
}

function showQuestion() {
  const q = selectedQuestions[current];
  document.getElementById("question-text").textContent = `Q${current + 1}. ${q.question}`;
  const optionsDiv = document.getElementById("options");
  optionsDiv.innerHTML = "";

  q.options.forEach((opt, i) => {
    const btn = document.createElement("button");
    btn.textContent = `${String.fromCharCode(65 + i)}. ${opt}`;
    btn.className = "option";
    btn.onclick = () => checkAnswer(i);
    optionsDiv.appendChild(btn);
  });
}

function checkAnswer(selected) {
  const q = selectedQuestions[current];
  if (selected === q.correct) score++;

  current++;
  if (current < selectedQuestions.length) {
    showQuestion();
  } else {
    endGame();
  }
}

function endGame() {
  document.getElementById("question-text").textContent = "Game Over!";
  document.getElementById("options").innerHTML = "";
  document.getElementById("result").textContent = `Your score: ${score} / ${selectedQuestions.length}`;
}

/* Start game on load so the game is ready when user opens the Game section */
selectedQuestions = getRandomQuestions();
showQuestion();

/* Make sure Leaflet map resizes if user opens the map section */
_itcu_map.whenReady(()=> {
  window._itcu_map_ready = true;
  setTimeout(()=> { try { _itcu_map.invalidateSize(); } catch(e){} }, 500);
});
</script>
</body>
</html>
