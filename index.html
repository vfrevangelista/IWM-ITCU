<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive World Map â€” International Technology Cooperation Unit</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
  <style>
    html, body, #map {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #c8e6f5; /* match the ocean tone of tiles */
    }
    #map {
      background-color: #c8e6f5;
    }
    .popup-content {
      font-size: 14px;
      line-height: 1.5;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 5px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 4px 6px;
      text-align: left;
    }
    th {
      background-color: #f4f4f4;
    }
    .play-btn {
      position: fixed;
      top: 15px;
      right: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 1000;
      transition: background-color 0.2s ease;
    }
    .play-btn:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <button class="play-btn" onclick="https://github.com/vfrevangelista/IWM-ITCU/blob/main/Game.html">Ready to Play</button>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script>
    // Initialize map with a closer zoom level (about 30% more zoomed in)
    const map = L.map('map', {
      worldCopyJump: false,
      noWrap: true,
      minZoom: 2,
      maxZoom: 6,
      zoomSnap: 0.25,
      zoomDelta: 0.5
    }).setView([20, 0], 3); // Slightly zoomed-in view

    // English-only tiles
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png', {
      maxZoom: 6,
      minZoom: 2,
      noWrap: true,
      attribution: '&copy; OpenStreetMap contributors, &copy; CartoDB'
    }).addTo(map);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}.png', {
      maxZoom: 6,
      minZoom: 2,
      noWrap: true,
      attribution: '&copy; OpenStreetMap contributors, &copy; CartoDB'
    }).addTo(map);

    const allowedCountries = [
      'Italy','United Kingdom','Australia','Japan','United States of America','Canada',
      'Cambodia','Laos','Myanmar','France','Taiwan','South Korea','Philippines','India','China','East Asia'
    ];

    const shortInfo = {
      'Philippines': {capital: 'Manila', detail: '', note: [['Region','Southeast Asia','English','Currency','Peso (PHP)']]},
      'United States of America': {capital: 'Washington, D.C.', detail: 'The partnership with the USA is on agriculture. We are sending PhD scholars at Texas Tech University taking up Plant and Soil Science', note: [['3','On-going','PHD']]},
      'Japan': {capital: 'Tokyo', detail: 'The top partnership with Japan is on agriculture and health. We are sending PhD scholars at Nagoya and Osaka University. We also have joint researches on agriculture, health, engineering, and nuclear.',note: [['9','On-going','PHD']]},
      'France': {capital: 'Paris', detail: 'The partnership with France is on health, engineering, environment, agriculture, and economy. We are sending PhD scholars at Texas Tech University taking up Plant and Soil Science',note: [['97','On-going','MS'],['19','On-going','PHD']]},
      'India': {capital: 'New Delhi', detail: 'The partnership with India is on AI, engineering, and health. We have joint researches on those areas and continues to advance other priorities',note: [['Artificial Intelligence','1'],['Enginnering','1'],['Health','1']]},
      'Australia': {capital: 'Canberra', detail: 'The top partnership with Australia is on STEM education, IT, and agriculture. We are sending MS and PhD scholars at various universities, e.g. James Cook University, Griffith University, and Queensland University of Technology. We also note that DOST-PCAARRD and  Australian Centre for International Agricultural Research have been partners for almost 5 decades advancing agricultural research in the PH.',note: [['17','Graduated','MS'],['11','On-going','MS'],['28','On-going','PHD']]},
      'United Kingdom': {capital: 'London', detail: 'The top partnership with UK is on health, environment, and agriculture. We are sending PhD scholars at various universities, e.g. Universities of Cambridge, Edinburgh, Glasgow, Sterling, etc. We also had joint researches on health and environment. ',note: [['10','Graduated','PHD'],['5','On-going','PHD']]},
      'Italy': {capital: 'Rome', detail: 'The partnership with Italy is on health. We are sending PhD scholars at University of Trieste taking up Molecular Biomedicine', note: [['2','Graduated','PHD'],['6','On-going','PHD']]},
      'Canada': {capital: 'Ottawa', detail: 'The partnership with Canada is on agriculture, health, engineering, and environment. We are sending PhD and MS scholars at University of Alberta. Soon scholars will also be attending at University of Saskatchewan and Dalhousie University.',note: [['1','Graduated','MS'],['6','On-going','MS'],['9','On-going','PHD']]},
      'China': {capital: 'Beijing', detail: 'The partnership with China is on energy, agriculture, and health. We have joint researches on those areas and continues to advance other priorities.',note: [['Agriculture','1'],['Enegry','1'],['Health','1']]},
      'South Korea': {capital: 'Seoul', detail: 'The top partnership with South Korea is on agriculture, climate and weather, energy, and health. We have joint researches on those areas and continues to advance other priorities.',note: [['Agriculture','1'],['Climate and Weather','1'],['Energy','1'],['Health','1']]},
      'Taiwan': {capital: 'Taipei', detail: 'The top partnership with Taiwan is on geological, environment, climate and weather, and health. We have numerous joint researches and sandwich scholarship programs with Taiwan. ',note: [['4','Finished','BS/MS'],['81','Finished','MS'],['20','Finished','PHD']]},
      'Cambodia': {capital: 'Phnom Penh', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['12','On-going','MS']]},
      'Laos': {capital: 'Vientiane', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['3','On-going','PHD'],['3','On-going','PHD']]},
      'Myanmar': {capital: 'Naypyidaw', detail: 'The partnership with ASEAN is very extensive under Committee on Science, Technology, and Innovation. One of the most notable partnership output is the technical cooperation ASEAN-CLM scholarship. In here, the Philippines is funding scholars from Cambodia, Lao, and Myanmar to study in the Philippines and bring back their knowledge in their country.',note: [['15','On-going','PHD'],['17','On-going','PHD']]}
    };

    let globalView = map.getCenter();
    let globalZoom = map.getZoom();

    fetch('https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json')
      .then(res => res.json())
      .then(data => {
        L.geoJSON(data, {
          style: feature => {
            return allowedCountries.includes(feature.properties.name)
              ? {color: '#007BFF', weight: 1.5, fillOpacity: 0.4}
              : {color: '#ccc', weight: 0.5, fillOpacity: 0.05};
          },
          onEachFeature: (feature, layer) => {
            if (allowedCountries.includes(feature.properties.name)) {
              layer.on({
                mouseover: e => e.target.setStyle({color: '#FF6600', weight: 2}),
                mouseout: e => e.target.setStyle({color: '#007BFF', weight: 1.5}),
                click: e => {
                  map.flyToBounds(layer.getBounds(), {padding: [40, 40], duration: 1.5});
                  showPopup(feature, e.latlng);
                }
              });
            }
          }
        }).addTo(map);
      });

    function showPopup(feature, latlng) {
      const name = feature.properties.name || 'Unknown';
      const info = shortInfo[name];

      let popupHTML = `<div class='popup-content'><h3>${name}</h3>`;

      if (info) {
        popupHTML += `<b>Capital:</b> ${info.capital}<br><b>Detail/s :</b> ${info.detail}`;
        popupHTML += `<table><tr><th>No. of Student/s</th><th>Status</th><th>Level</th></tr>`;
        info.note.forEach(([a,b,c]) => {
          popupHTML += `<tr><td>${a}</td><td>${b}</td><td>${c}</td></tr>`;
        });
        popupHTML += `</table>`;
      } else {
        popupHTML += `No data available. <a href='https://en.wikipedia.org/wiki/${encodeURIComponent(name)}' target='_blank'>Learn more</a>`;
      }

      popupHTML += `</div>`;

      const popup = L.popup({maxWidth: 320, closeButton: true})
        .setLatLng(latlng)
        .setContent(popupHTML)
        .openOn(map);

      map.once('popupclose', () => {
        map.flyTo(globalView, globalZoom, {duration: 1.5});
      });
    }
  </script>
</body>

</html>
